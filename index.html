<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Évaluation Nutritionnelle</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background-color: #f5f5f5;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        #resultat {
            margin-top: 20px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        ul {
            padding-left: 20px;
        }
        li {
            margin-bottom: 8px;
        }
        .questionnaire {
            margin-top: 30px;
        }
        .question {
            margin-bottom: 15px;
        }
        label {
            font-weight: bold;
        }
        input {
            margin-top: 5px;
            display: block;
            padding: 8px;
            width: 100%;
            max-width: 400px;
        }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #4CAF50;
            border: none;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>

    <h1>Résultats de votre Bilan Nutritionnel</h1>

    <div class="questionnaire" id="questionnaire">
        <div class="question">
            <label for="poissons">Est-ce que vous consommez des poissons gras (maquereau, sardines, saumon) ? (0/1/2+ fois par semaine)</label>
            <input type="number" id="poissons" min="0" max="7">
        </div>

        <div class="question">
            <label for="fruits">Combien de fois par semaine mangez-vous des fruits ?</label>
            <input type="number" id="fruits" min="0" max="21">
        </div>

        <div class="question">
            <label for="huile">Combien de fois utilisez-vous de l'huile de Colza, Lin, Noix par semaine ?</label>
            <input type="number" id="huile" min="0" max="21">
        </div>

        <!-- Ajout d'autres questions ici si besoin -->
        <!-- Exemple de nouvelles questions -->
        <div class="question">
            <label for="legumes">Combien de portions de légumes mangez-vous par jour ?</label>
            <input type="number" id="legumes" min="0" max="10">
        </div>

        <div class="question">
            <label for="viande">Consommez-vous de la viande rouge par semaine ? (0 = non, 1 = oui)</label>
            <input type="number" id="viande" min="0" max="7">
        </div>

        <div class="question">
            <label for="cereales">Consommez-vous des céréales complètes chaque jour ? (0 = non, 1 = oui)</label>
            <input type="number" id="cereales" min="0" max="1">
        </div>

        <button onclick="analyserBilan()">Analyser mon Bilan</button>
    </div>

    <div id="resultat"></div>

    <script>
        function calculerScoreTotal(reponses) {
            // Addition simple pour exemple
            let score = 0;
            for (let question in reponses) {
                score += parseInt(reponses[question]) || 0;
            }
            return score;
        }

        function getReponses() {
            return {
                "Est-ce que vous consommez des poissons gras (maquereau, sardines, saumon) ?": parseInt(document.getElementById("poissons").value) || 0,
                "Combien de fois par semaine mangez-vous des fruits ?": parseInt(document.getElementById("fruits").value) || 0,
                "Combien de fois utilisez-vous de l'huile de Colza, Lin, Noix par semaine ?": parseInt(document.getElementById("huile").value) || 0,
                "Combien de portions de légumes mangez-vous par jour ?": parseInt(document.getElementById("legumes").value) || 0,
                "Consommez-vous de la viande rouge par semaine ?": parseInt(document.getElementById("viande").value) || 0,
                "Consommez-vous des céréales complètes chaque jour ?": parseInt(document.getElementById("cereales").value) || 0
            };
        }

        function verifierCarences(reponses, regles) {
            let carencesDetectees = [];

            regles.forEach(regle => {
                const reponse = reponses[regle.question];
                if (regle.valeursDeclenchantes.includes(reponse)) {
                    carencesDetectees.push(regle.message);
                }
            });

            return carencesDetectees;
        }

        function analyserBilan() {
            const resultatElement = document.getElementById("resultat");
            const reponses = getReponses();
            const scoreTotal = calculerScoreTotal(reponses);

            resultatElement.innerHTML = `<h2>Score total : ${scoreTotal}</h2>`;

            const reglesCarences = [
                {
                    question: "Est-ce que vous consommez des poissons gras (maquereau, sardines, saumon) ?",
                    valeursDeclenchantes: [0],
                    message: "Carence en EPA/DHA"
                },
                {
                    question: "Combien de fois par semaine mangez-vous des fruits ?",
                    valeursDeclenchantes: [0, 1],
                    message: "Carence en manganèse"
                },
                {
                    question: "Combien de fois utilisez-vous de l'huile de Colza, Lin, Noix par semaine ?",
                    valeursDeclenchantes: [0, 1],
                    message: "Carence en Omega 3"
                }
                // Tu peux rajouter ici d'autres règles de carences facilement
            ];

            const carences = verifierCarences(reponses, reglesCarences);

            if (carences.length > 0) {
                let listeHTML = "<h3>Carences détectées :</h3><ul>";
                carences.forEach(message => {
                    listeHTML += `<li>${message}</li>`;
                });
                listeHTML += "</ul>";
                resultatElement.innerHTML += listeHTML;
            } else {
                resultatElement.innerHTML += "<p>Aucune carence détectée.</p>";
            }
        }
    </script>

</body>
</html>
